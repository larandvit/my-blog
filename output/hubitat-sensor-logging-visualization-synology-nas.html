<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml"><head><title>Hubitat Sensor Logging Visualization in Synology NAS - tech jogging</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="A personal blog includes technical articles aimed to share knowledge and experience with others."><link rel="canonical" href="https://techjogging.com/hubitat-sensor-logging-visualization-synology-nas.html"><meta name="author" content="Vitaly Saversky"><meta name="description" content="Sensor logging visualization is not available in Hubitat as the standard functionality. There are some ways to do it. The easiest implementation of the functionality is based on InfluxDB with Grafana. Those products are open-source and they are aimed to build logging visualization. The linking piece to Hubitat is InfluxDB …"><meta property="og:site_name" content="tech jogging"><meta property="og:type" content="article"><meta property="og:title" content="Hubitat Sensor Logging Visualization in Synology NAS"><meta property="og:url" content="https://techjogging.com/hubitat-sensor-logging-visualization-synology-nas.html"><meta property="og:description" content="Sensor logging visualization is not available in Hubitat as the standard functionality. There are some ways to do it. The easiest implementation of the functionality is based on InfluxDB with Grafana. Those products are open-source and they are aimed to build logging visualization. The linking piece to Hubitat is InfluxDB …"><meta property="article:published_time" content="2022-11-10"><meta property="article:section" content="Hubitat"><meta property="article:author" content="Vitaly Saversky"><link rel="stylesheet" href="https://techjogging.com/theme/css/bootstrap.flatly.min.css" type="text/css"><link href="https://techjogging.com/theme/css/font-awesome.min.css" rel="stylesheet"><link href="https://techjogging.com/theme/css/pygments/monokai.css" rel="stylesheet"><link href="https://techjogging.com/theme/tipuesearch/tipuesearch.css" rel="stylesheet"><link rel="stylesheet" href="https://techjogging.com/theme/css/style.css" type="text/css"></head><body><div class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="https://techjogging.com/" class="navbar-brand"><img alt="tech jogging" class="img-responsive pull-left gap-right" src="https://techjogging.com/extra/site-logo.png" width> tech jogging </a></div><div class="collapse navbar-collapse navbar-ex1-collapse"><ul class="nav navbar-nav"><li><a href="https://techjogging.com/pages/about-blog.html"> About blog </a></li></ul><ul class="nav navbar-nav navbar-right"><li><span><form class="navbar-search" action="/search.html"><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" pattern=".{3,}" title="At least 3 characters" required><button type="submit" class="tipue_search_button"><div class="tipue_search_icon">&#9906;</div></button></form></span></li></ul></div></div></div><div class="container"><div class="row"><div class="col-sm-9"><section id="content"><article><header class="page-header"><h1><a href="https://techjogging.com/hubitat-sensor-logging-visualization-synology-nas.html" rel="bookmark" title="Permalink to Hubitat Sensor Logging Visualization in Synology NAS"> Hubitat Sensor Logging Visualization in Synology NAS </a></h1></header><div class="entry-content"><div class="panel"><div class="panel-body"><footer class="post-info"><span class="label label-default">Date</span><span class="published article-info-label"><i class="fa fa-calendar"></i><time datetime="2022-11-10T00:00:00-05:00"> 2022-11-10</time></span><span class="label label-default pageviews">Views</span><span class="article-info-label pageviews"><span class="badge pageviews" id="query-output"></span></span><span class="label label-default">Category</span><span class="article-info-label"><a href="https://techjogging.com/category/hubitat.html">Hubitat</a>, <a href="https://techjogging.com/category/synology-dsm.html">Synology DSM</a></span></footer></div></div><p>Sensor logging visualization is not available in Hubitat as the standard functionality. There are some ways to do it. The easiest implementation of the functionality is based on InfluxDB with Grafana. Those products are open-source and they are aimed to build logging visualization. The linking piece to Hubitat is InfluxDB Logger application for Hubitat. Also, it is required a box to install and run InfluxDB and Grafana. If Synology NAS with decent configuration is in place, it might be used to install and run InfluxDB and Grafana. Synology NAS Docker handles InfluxDB and Grafana perfectly for the case. The design is outlined and it is time to follow the steps to accomplish the task of implementation of the functionality.</p><h2>1. Install Docker in Synology NAS from Package Center</h2><p><img alt="Install Docker in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/install-docker-in-synology-nas.jpg"></p><h2>2. Create Subfolder with <strong>grafana</strong> Name in <strong>docker</strong> Folder</h2><p><img alt="Create grafana Subfolder in docker Folder in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/create-grafana-subfolder-in-docker-folder.jpg"></p><h2>3. Grant Access for Grafana User to New <strong>grafana</strong> Folder</h2><p>Grafana image contains a user with 472 user ID. To make the grafana folder persistent, user with 472 ID must be an owner of the folder.</p><ul><li><p>Enable SSH service</p><p><img alt="Enable SSH Service in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/enable-ssh-in-synology-nas.jpg"></p></li><li><p>If needed, set security level to Low in Advanced Settings</p><p><img alt="Set Security to Low in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/set-security-to-low-in-synology-nas.jpg"></p></li><li><p>Open ssh tool, for example, PuTTY, connect to Synology NAS, and run the command</p><p><img alt="PuTTY" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/putty.jpg"></p><div class="highlight"><pre><span></span>sudo chown -R <span class="m">472</span>:472 /volume1/docker/grafana
</pre></div><p>Validate</p><div class="highlight"><pre><span></span>ls -l /volume1/docker/
drwxrwxrwx+ <span class="m">1</span>  <span class="m">472</span>  <span class="m">472</span> <span class="m">0</span> Oct <span class="m">29</span> <span class="m">21</span>:54 grafana
</pre></div></li></ul><h2>4. Download Latest Grafana Image in Docker</h2><p><img alt="Download Latest Grafana Image in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/download-latest-grafana-image-in-synology-nas.jpg"></p><h2>5. Configure Downloaded Grafana Image</h2><p><img alt="Configure Downloaded Grafana Image in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/configure-downloaded-grafana-image.jpg"></p><ul><li><p>Change name to Grafana</p><p><img alt="Change Name to Grafana for Docker Image in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/change-name-to-grafana-for-docker-image.jpg"></p></li><li><p>Enable auto-start in Advanced Settings</p><p><img alt="Enable Auto-start in Advanced Settings in Docker Image in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/enable-auto-start-in-advanced-settings-docker-image.jpg"></p></li><li><p>Map <strong>grafana</strong> folder to <strong>/var/lib/grafana</strong> Docker image folder in Advanced Settings</p><p><img alt="Map grafana Folder to Docker Image Folder in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/map-grafana-folder-to-docker-image-folder.jpg"></p></li><li><p>Assign a Grafana port in Advanced Settings</p><p>It has to be unoccupied port.</p><p><img alt="Assign Grafana Port in Advanced Settings in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/assign-grafana-port-in-advanced-settings.jpg"></p></li></ul><h2>6. Run Grafana container</h2><p><img alt="Run Grafana Container in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/run-grafana-container.jpg"></p><h2>7. Navigate to Grafana Login Page</h2><p>User name and password is <strong>admin</strong>. Type <strong>[your Synology NAS address]:[Grafana port as per topic #5]</strong> in browser.</p><p><img alt="Navigate to Grafana Login Page in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/navigate-to-grafana-login-page.jpg"></p><h2>8. Download latest 1.x InfluxDB Image in Docker</h2><p><img alt="Download Latest 1.x InfluxDB Image in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/download-latest-1x-influxdb-image-in-synology-nas.jpg"></p><p><img alt="Choose InfluxDB Docker Tag in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/choose-influxdb-docker-tag-in-synology-nas.jpg"></p><h2>9. Configure Downloaded InfluxDB Image</h2><ul><li><p>Change name to InfluxDB</p><p><img alt="Change Name to InfluxDB for Docker Image in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/change-name-to-influxdb-for-docker-image.jpg"></p></li><li><p>Enable auto-start in Advanced Settings</p><p><img alt="Enable Auto-start in Advanced Settings for InfluxDB in Docker Image in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/enable-auto-start-in-advanced-settings-for-influxdb-in-docker-image.jpg"></p></li><li><p>Create InfluxDB folder in docker folder on Volume Tab of Advanced Settings</p><p>The folders are <strong>influxdb/var/lib/influxdb</strong>.</p><p><img alt="Create InfluxDB Folders in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/create-influxdb-folders.jpg"></p><p><img alt="Created InfluxDB Folders in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/created-influxdb-folders.jpg"></p></li><li><p>Map InfluxDB folders to <strong>/var/lib/influxdb</strong> Docker image folder in Advanced Settings</p><p><img alt="Map InfluxDB Folder to Docker Image Folder in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/map-influxdb-folder-to-docker-image-folder.jpg"></p></li><li><p>Make sure that Grafana and InfluxDB have the same network</p><p><img alt="Grafana and InfluxDB Have Same Network in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/grafana-and-influxdb-have-same-network.jpg"></p></li><li><p>Assign InfluxDB port in Advanced Settings</p><p><img alt="Assign Local InfluxDB Port in Advanced Settings in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/assign-local-influxdb-port-in-advanced-settings.jpg"></p></li><li><p>Add environment variables in Advanced Settings</p><ul><li>DOCKER_INFLUXDB_INIT_MODE -&gt; setup</li><li>DOCKER_INFLUXDB_INIT_USERNAME -&gt; my-user</li><li>DOCKER_INFLUXDB_INIT_PASSWORD -&gt; my-password</li><li>DOCKER_INFLUXDB_INIT_ORG -&gt; my-org</li><li>DOCKER_INFLUXDB_INIT_BUCKET -&gt; my-bucket</li></ul><p><img alt="Add InfluxDB Environment Variables in Advanced Settings in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/add-influxdb-environment-variables-in-advanced-settings.jpg"></p></li><li><p>InfluxDB Docker image final step</p><p><img alt="InfluxDB Docker Image Final Step in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/influxdb-docker-image-final-step.jpg"></p></li></ul><h2>11. Create Hubitat database</h2><ul><li><p>Open InfluxDB container</p><p><img alt="Open InfluxDB Container in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/open-influxdb-container.jpg"></p></li><li><p>Go to Terminal</p><p><img alt="Go to InfluxDB Container Terminal in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/go-to-influxdb-container-terminal.jpg"></p></li><li><p>Click Create button and then select bash</p><p><img alt="Create New Terminal in InfluxDB Container in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/create-new-terminal-in-influxdb-container.jpg"></p></li><li><p>Run influx command</p><p><img alt="Run influx Command in InfluxDB Docker Container in Synology NAS" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/run-influx-command-in-influxdb-docker-container.jpg"></p></li><li><p>Create Hubitat database</p><div class="highlight"><pre><span></span>&gt; create database Hubitat
</pre></div></li><li><p>Validate database creation</p><div class="highlight"><pre><span></span>&gt; show databases
name: databases
name
----
_internal
Hubitat
</pre></div></li><li><p>Exit from InfluxDB</p><div class="highlight"><pre><span></span>&gt; <span class="nb">exit</span> 
root@InfluxDB:/#
</pre></div></li></ul><h2>12. Add Grafana Panel to view Habitat Data</h2><ul><li><p>Open Grafana home page entering <strong>[your Synology NAS address]:[Grafana port as per topic #5]</strong></p><p><img alt="Grafana Home Page" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/grafana-home-page.jpg"></p></li><li><p>Add data source</p><p><img alt="Add Grafana Data Source" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/add-grafana-data-source.jpg"></p></li><li><p>Find InfluxDB data source</p><p><img alt="Find InfluxDB Data Source" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/find-influxdb-data-source.jpg"></p></li><li><p>Replace data source name, URL, and Database</p><p><img alt="Replace Name, URL, and Database in Grafana Data Source" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/replace-name-url-database-in-grafana-data-source.jpg"></p></li><li><p>Click Save &amp; Test to get message datasource is working</p><p><img alt="Grafana Datasource Is Working" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/grafana-datasource-is-working.jpg"></p></li><li><p>Create new dashboard</p><p><img alt="Create New Grafana Dashboard" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/create-new-grafana-dashboard.jpg"></p></li><li><p>Add new panel</p><p><img alt="Add New Panel to Grafana Dashboard" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/add-new-panel-to-grafana-dashboard.jpg"></p></li><li><p>Create query to retrieve data</p><p><img alt="Create Grafana Query to Retrieve Data" src="https://techjogging.com/images/hubitat-sensor-logging-visualization-synology-nas/create-grafana-query-to-retrieve-data.jpg"></p></li></ul><h2>Resources</h2><ul><li><a href="https://community.hubitat.com/t/hubitat-influxdb-grafana-howto-ubuntu-linux/97798">Hubitat + InfluxDB + Grafana How to Ubuntu Linux</a></li><li><a href="https://github.com/wbenny/synology-nas-monitoring">Synology NAS monitoring</a></li><li><a href="https://www.wundertech.net/how-to-install-grafana-on-a-synology-nas/">How to Install Grafana on a Synology NAS</a></li></ul></div><hr><section class="comments" id="comments"><h2>Comments</h2><div id="disqus_thread"></div><script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'techjogging'; // required: replace example with your forum shortname

            var disqus_config = function () {
                this.language = "en";

                        this.page.identifier = '2022-11-10-hubitat-sensor-logging-visualization-synology-nas';
                        this.page.url = 'https://techjogging.com/hubitat-sensor-logging-visualization-synology-nas.html';
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></section></article></section></div><div class="col-sm-3" id="sidebar"><aside><section class="well well-sm"><ul class="list-group list-group-flush"><li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4><ul class="list-group" id="recentposts"><li class="list-group-item"><a href="https://techjogging.com/get-started-custom-connector-plugin-trino.html">Get Started with Custom Connector Plugin in Trino</a></li><li class="list-group-item"><a href="https://techjogging.com/use_https_protocol_trino_server_pkcs12_store.html">Use HTTPS Protocol in Trino Server with PKCS 12 Store</a></li><li class="list-group-item"><a href="https://techjogging.com/get-started-trino-plugin.html">Get Started with Trino Plugin</a></li><li class="list-group-item"><a href="https://techjogging.com/hubitat-sensor-logging-visualization-synology-nas.html">Hubitat Sensor Logging Visualization in Synology NAS</a></li><li class="list-group-item"><a href="https://techjogging.com/cobol-float-data-type.html">COBOL Float Data Type</a></li></ul></li><li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categories</span></h4><ul class="list-group" id="categories"><li class="list-group-item"><a href="https://techjogging.com/category/cobol.html"><i class="fa fa-folder-open fa-lg"></i>COBOL</a></li><li class="list-group-item"><a href="https://techjogging.com/category/cron.html"><i class="fa fa-folder-open fa-lg"></i>Cron</a></li><li class="list-group-item"><a href="https://techjogging.com/category/dbeaver.html"><i class="fa fa-folder-open fa-lg"></i>DBeaver</a></li><li class="list-group-item"><a href="https://techjogging.com/category/docker.html"><i class="fa fa-folder-open fa-lg"></i>Docker</a></li><li class="list-group-item"><a href="https://techjogging.com/category/git.html"><i class="fa fa-folder-open fa-lg"></i>Git</a></li><li class="list-group-item"><a href="https://techjogging.com/category/google-analytics.html"><i class="fa fa-folder-open fa-lg"></i>Google Analytics</a></li><li class="list-group-item"><a href="https://techjogging.com/category/hardware.html"><i class="fa fa-folder-open fa-lg"></i>Hardware</a></li><li class="list-group-item"><a href="https://techjogging.com/category/hive.html"><i class="fa fa-folder-open fa-lg"></i>Hive</a></li><li class="list-group-item"><a href="https://techjogging.com/category/hubitat.html"><i class="fa fa-folder-open fa-lg"></i>Hubitat</a></li><li class="list-group-item"><a href="https://techjogging.com/category/kerberos.html"><i class="fa fa-folder-open fa-lg"></i>Kerberos</a></li><li class="list-group-item"><a href="https://techjogging.com/category/linux.html"><i class="fa fa-folder-open fa-lg"></i>Linux</a></li><li class="list-group-item"><a href="https://techjogging.com/category/microsoft-access.html"><i class="fa fa-folder-open fa-lg"></i>Microsoft Access</a></li><li class="list-group-item"><a href="https://techjogging.com/category/microsoft-excel.html"><i class="fa fa-folder-open fa-lg"></i>Microsoft Excel</a></li><li class="list-group-item"><a href="https://techjogging.com/category/minio.html"><i class="fa fa-folder-open fa-lg"></i>MinIO</a></li><li class="list-group-item"><a href="https://techjogging.com/category/ms-sql-server.html"><i class="fa fa-folder-open fa-lg"></i>MS SQL Server</a></li><li class="list-group-item"><a href="https://techjogging.com/category/nginx.html"><i class="fa fa-folder-open fa-lg"></i>Nginx</a></li><li class="list-group-item"><a href="https://techjogging.com/category/python.html"><i class="fa fa-folder-open fa-lg"></i>Python</a></li><li class="list-group-item"><a href="https://techjogging.com/category/security.html"><i class="fa fa-folder-open fa-lg"></i>Security</a></li><li class="list-group-item"><a href="https://techjogging.com/category/surveillance.html"><i class="fa fa-folder-open fa-lg"></i>Surveillance</a></li><li class="list-group-item"><a href="https://techjogging.com/category/synology-dsm.html"><i class="fa fa-folder-open fa-lg"></i>Synology DSM</a></li><li class="list-group-item"><a href="https://techjogging.com/category/talend.html"><i class="fa fa-folder-open fa-lg"></i>Talend</a></li><li class="list-group-item"><a href="https://techjogging.com/category/trino.html"><i class="fa fa-folder-open fa-lg"></i>Trino</a></li><li class="list-group-item"><a href="https://techjogging.com/category/virtualization.html"><i class="fa fa-folder-open fa-lg"></i>Virtualization</a></li><li class="list-group-item"><a href="https://techjogging.com/category/windows.html"><i class="fa fa-folder-open fa-lg"></i>Windows</a></li></ul></li></ul></section></aside></div></div></div><footer><div class="container"><hr><div class="row"><div class="col-xs-10">&copy; 2023 Vitaly Saversky &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>, <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>, <a href="http://getbootstrap.com" target="_blank">Bootstrap</a></div><div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i><a href="#">Back to top</a></p></div></div></div></footer><script src="https://techjogging.com/theme/js/jquery.min.js"></script><script src="https://techjogging.com/theme/js/bootstrap.min.js"></script><script src="https://techjogging.com/theme/js/respond.min.js"></script><script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'techjogging'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script><script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-156524189-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script><script src="https://techjogging.com/theme/js/report_access.js"></script><script type="text/javascript">
(function(w,d,s,g,js,fs){
  g=w.gapi||(w.gapi={});g.analytics={q:[],ready:function(f){this.q.push(f);}};
  js=d.createElement(s);fs=d.getElementsByTagName(s)[0];
  js.src='https://apis.google.com/js/platform.js';
  fs.parentNode.insertBefore(js,fs);js.onload=function(){g.load('analytics');};
}(window,document,'script'));
</script><script type="text/javascript">
gapi.analytics.ready(function() {

	  gapi.analytics.auth.authorize({
	    'serverAuth': {
	      'access_token': ANALYTICS_TOKEN
	    }
	  });
	  
	  var pagePathFilter = 'ga:pagePath==' + window.location.pathname;
	  
	  var report = new gapi.analytics.report.Data({
		  query: {
		    ids: 'ga:209816969',
		    'start-date': '2020-02-29',
		    'end-date': 'today',
		    metrics: 'ga:pageviews',
		    filters: pagePathFilter
		  }
		});

		report.on('success', function(response) {
			pageViews = response.totalsForAllResults['ga:pageviews'];
			if (pageViews!='0') {
				$('#query-output').text(pageViews);
				for (pageviewsElement of document.getElementsByClassName('pageviews')){
					pageviewsElement.style.display='initial';
				}
			}
		});

		report.execute();

	  
	});
</script></body></html>