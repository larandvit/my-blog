<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml"><head><title>Create OAuth Credentials for Google Analytics APIs - tech jogging</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="A personal blog includes technical articles aimed to share knowledge and experience with others."><link rel="canonical" href="/create-oauth-credentials-for-google-analytics-apis.html"><meta name="author" content="Vitaly Saversky"><meta name="description" content="One of the ways to implement Google Analytics in your tools or Web sites is to utilize Google Analytics APIs. This way is very flexible as Google Analytics APIs can be used with wide range of the programming languages. Moreover, APIs are mature product which on the market for many …"><meta property="og:site_name" content="tech jogging"><meta property="og:type" content="article"><meta property="og:title" content="Create OAuth Credentials for Google Analytics APIs"><meta property="og:url" content="/create-oauth-credentials-for-google-analytics-apis.html"><meta property="og:description" content="One of the ways to implement Google Analytics in your tools or Web sites is to utilize Google Analytics APIs. This way is very flexible as Google Analytics APIs can be used with wide range of the programming languages. Moreover, APIs are mature product which on the market for many …"><meta property="article:published_time" content="2020-04-18"><meta property="article:section" content="Google"><meta property="article:author" content="Vitaly Saversky"><link rel="stylesheet" href="/theme/css/bootstrap.flatly.min.css" type="text/css"><link href="/theme/css/font-awesome.min.css" rel="stylesheet"><link href="/theme/css/pygments/monokai.css" rel="stylesheet"><link href="/theme/tipuesearch/tipuesearch.css" rel="stylesheet"><link rel="stylesheet" href="/theme/css/style.css" type="text/css"></head><body><div class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img alt="tech jogging" class="img-responsive pull-left gap-right" src="/extra/site-logo.png" width> tech jogging </a></div><div class="collapse navbar-collapse navbar-ex1-collapse"><ul class="nav navbar-nav"><li><a href="/pages/about-blog.html"> About blog </a></li></ul><ul class="nav navbar-nav navbar-right"><li><span><form class="navbar-search" action="/search.html"><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" pattern=".{3,}" title="At least 3 characters" required><button type="submit" class="tipue_search_button"><div class="tipue_search_icon">&#9906;</div></button></form></span></li></ul></div></div></div><div class="container"><div class="row"><div class="col-sm-9"><section id="content"><article><header class="page-header"><h1><a href="/create-oauth-credentials-for-google-analytics-apis.html" rel="bookmark" title="Permalink to Create OAuth Credentials for Google Analytics APIs"> Create OAuth Credentials for Google Analytics APIs </a></h1></header><div class="entry-content"><div class="panel"><div class="panel-body"><footer class="post-info"><span class="label label-default">Date</span><span class="published"><i class="fa fa-calendar"></i><time datetime="2020-04-18T00:00:00-04:00"> Sat 18 April 2020</time></span><span class="label label-default">Category</span><a href="/category/google.html">Google</a></footer></div></div><p>One of the ways to implement Google Analytics in your tools or Web sites is to utilize Google Analytics APIs. This way is very flexible as Google Analytics APIs can be used with wide range of the programming languages. Moreover, APIs are mature product which on the market for many years. The latest v4 contains rich set of functionalities which was forged from earliest versions. It's back compatible with previous v3. The first step to start using Google Analytics APIs includes creating of an OAuth credentials. There are many options to proceed with it but we follow a route to generate credentials for a Web site with javascript implementation. It's applicable to other scenarios as well.</p><h2>1. Create a Google account</h2><p>All Google tools request a Google account. If you already have a Google email, it can be used as your Google account otherwise follow <a href="https://accounts.google.com/signup">link</a>.</p><p><img alt="Create Google Account" src="/images/create-oauth-credentials-for-google-analytics-apis/create-google-account.png"></p><h2>2. Open Google Developer Console</h2><p><a href="https://console.developers.google.com">Google Developer Console</a> is used to create an OAuth credentials. To open the tool, sign in with your Google account, and then agree to Terms of Service.</p><p><img alt="Google Developer Console Landing Screen" src="/images/create-oauth-credentials-for-google-analytics-apis/google-developer-console-landing-screen.png"></p><h2>3. Create a new API project</h2><ul><li>Type in your project name. If you create a new project for your personal usage, leave <strong>Location</strong> with <strong>No organization</strong> default value.</li></ul><p><img alt="Create Google API Project" src="/images/create-oauth-credentials-for-google-analytics-apis/create-google-api-project.png"></p><ul><li>Your project name is the current one.</li></ul><p><img alt="Google API and Services Dashboard" src="/images/create-oauth-credentials-for-google-analytics-apis/google-apis-and-services-dashboard.png"></p><h2>4. Enable Google Analytics APIs</h2><ul><li><p>Click <strong>ENABLE APIS AND SERVICES</strong> button. <img alt="Enable Google Analytics APIs" src="/images/create-oauth-credentials-for-google-analytics-apis/enable-google-analytics-apis.png"></p></li><li><p>Search for <strong>Google Analytics APIs</strong> from the list of available APIs. <img alt="Search Google Analytics APIs" src="/images/create-oauth-credentials-for-google-analytics-apis/search-google-analytics-apis.png"></p></li><li><p>Confirm your intention. <img alt="Confirm Google Analytics APIs Enabling" src="/images/create-oauth-credentials-for-google-analytics-apis/confirm-google-analytics-apis-enabling.png"></p></li></ul><h2>5. Configure Consent</h2><ul><li><p>Select Credentials menu item from the dashboard. <img alt="Select Google Credentials Landing Screen" src="/images/create-oauth-credentials-for-google-analytics-apis/select-google-credentials-landing-screen.png"></p></li><li><p>Initiate configuration of consent clicking <strong>CONFIGURE CONSENT SCREEN</strong>. <img alt="Configure Google Consent Screen" src="/images/create-oauth-credentials-for-google-analytics-apis/configure-google-consent-screen.png"></p></li><li><p>If you left <strong>Location</strong> with <strong>No organization</strong> value, you have only <strong>External</strong> User Type option enabled. <img alt="Google OAuth Consent Screen" src="/images/create-oauth-credentials-for-google-analytics-apis/google-oauth-consent-screen.png"></p></li><li><p>Enter information about your Web site. <img alt="Google OAuth Consent Form" src="/images/create-oauth-credentials-for-google-analytics-apis/google-oath-consent-form.png"></p></li><li><p>Final screen of the configuration. <img alt="Google OAuth Consent Final Screen" src="/images/create-oauth-credentials-for-google-analytics-apis/google-oauth-consent-final-screen.png"></p></li></ul><h2>6. Create an OAuth credentials</h2><ul><li><p>Go back to Credentials screen and click <strong>CREATE CREDENTIALS</strong> button, and then select OAuth client ID. <img alt="Google OAuth Credentials" src="/images/create-oauth-credentials-for-google-analytics-apis/google-create-oauth-credentials.png"></p></li><li><p>Select <strong>Web application</strong> type, type in your application name, and enter your website. If you test it, you can enter http://localhost.com. <img alt="Google OAuth Credentials Form" src="/images/create-oauth-credentials-for-google-analytics-apis/google-create-oauth-credentials-form.png"></p></li><li><p>Confirmation screen. <img alt="Create Google OAuth Credentials Confirmation Screen" src="/images/create-oauth-credentials-for-google-analytics-apis/create-google-oauth-credentials-confirmation-screen.png"></p></li><li><p>Your OAuth credentials created. <img alt="Google Credentials Screen with OAuth Created" src="/images/create-oauth-credentials-for-google-analytics-apis/google-credentials-screen-with-oauth-created.png"></p></li><li><p>OAuth credentials information can be retrieved if you click on the name of <strong>OAuth 2.0 Client</strong> ID entry. <img alt="Google OAuth Credentials Information" src="/images/create-oauth-credentials-for-google-analytics-apis/google-oauth-credentials-information.png"></p></li><li><p>Clicking on <strong>DOWNLOAD JSON</strong> downloads your credentials as json file.</p><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;web&quot;</span><span class="p">:</span>
       <span class="p">{</span><span class="nt">&quot;client_id&quot;</span><span class="p">:</span><span class="s2">&quot;109743573222-tu7960r1m6kam5acmigfumlqebf016cf.apps.googleusercontent.com&quot;</span><span class="p">,</span>
        <span class="nt">&quot;project_id&quot;</span><span class="p">:</span><span class="s2">&quot;tech-jogging-blog&quot;</span><span class="p">,</span>
        <span class="nt">&quot;auth_uri&quot;</span><span class="p">:</span><span class="s2">&quot;https://accounts.google.com/o/oauth2/auth&quot;</span><span class="p">,</span>
        <span class="nt">&quot;token_uri&quot;</span><span class="p">:</span><span class="s2">&quot;https://oauth2.googleapis.com/token&quot;</span><span class="p">,</span>
        <span class="nt">&quot;auth_provider_x509_cert_url&quot;</span><span class="p">:</span><span class="s2">&quot;https://www.googleapis.com/oauth2/v1/certs&quot;</span><span class="p">,</span>
        <span class="nt">&quot;client_secret&quot;</span><span class="p">:</span><span class="s2">&quot;kEbM6uLv3NsgeEpiLDVz8hxS&quot;</span><span class="p">,</span>
        <span class="nt">&quot;javascript_origins&quot;</span><span class="p">:[</span><span class="s2">&quot;https://techjogging.com&quot;</span><span class="p">]</span>
       <span class="p">}</span>
<span class="p">}</span>
</pre></div></li></ul><h2>7. Sample API v3</h2><p><a href="https://developers.google.com/analytics/devguides/reporting/core/v3/quickstart/web-js">The sample</a> shows a number of sessions for the last 30 days.</p><p>Create an HTML file on your server replacing CLIENT_ID with yours in<code>CLIENT_ID = '109743573222-tu7960r1m6kam5acmigfumlqebf016cf.apps.googleusercontent.com'</code> line, and open it in browser. It will ask for your Google account credentials.</p><div class="highlight"><pre><span></span>    <span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Hello Analytics - A quickstart guide for JavaScript<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;auth-button&quot;</span> <span class="na">hidden</span><span class="p">&gt;</span>Authorize<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello Analytics<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">cols</span><span class="o">=</span><span class="s">&quot;80&quot;</span> <span class="na">rows</span><span class="o">=</span><span class="s">&quot;20&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;query-output&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>

  <span class="c1">// Replace with your client ID from the developer console.</span>
  <span class="kd">var</span> <span class="nx">CLIENT_ID</span> <span class="o">=</span> <span class="s1">&#39;109743573222-tu7960r1m6kam5acmigfumlqebf016cf.apps.googleusercontent.com&#39;</span><span class="p">;</span>

  <span class="c1">// Set authorized scope.</span>
  <span class="kd">var</span> <span class="nx">SCOPES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://www.googleapis.com/auth/analytics.readonly&#39;</span><span class="p">];</span>


  <span class="kd">function</span> <span class="nx">authorize</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handles the authorization flow.</span>
    <span class="c1">// `immediate` should be false when invoked from the button click.</span>
    <span class="kd">var</span> <span class="nx">useImmdiate</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="kc">true</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">authData</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">client_id</span><span class="o">:</span> <span class="nx">CLIENT_ID</span><span class="p">,</span>
      <span class="nx">scope</span><span class="o">:</span> <span class="nx">SCOPES</span><span class="p">,</span>
      <span class="nx">immediate</span><span class="o">:</span> <span class="nx">useImmdiate</span>
    <span class="p">};</span>

    <span class="nx">gapi</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="nx">authData</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">authButton</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;auth-button&#39;</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">authButton</span><span class="p">.</span><span class="nx">hidden</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="nx">authButton</span><span class="p">.</span><span class="nx">hidden</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">queryAccounts</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>


<span class="kd">function</span> <span class="nx">queryAccounts</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Load the Google Analytics client library.</span>
  <span class="nx">gapi</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;analytics&#39;</span><span class="p">,</span> <span class="s1">&#39;v3&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// Get a list of all Google Analytics accounts for this user</span>
    <span class="nx">gapi</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">management</span><span class="p">.</span><span class="nx">accounts</span><span class="p">.</span><span class="nx">list</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">handleAccounts</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">handleAccounts</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handles the response from the accounts list method.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Get the first Google Analytics account.</span>
    <span class="kd">var</span> <span class="nx">firstAccountId</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">id</span><span class="p">;</span>

    <span class="c1">// Query for properties.</span>
    <span class="nx">queryProperties</span><span class="p">(</span><span class="nx">firstAccountId</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;No accounts found for this user.&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">queryProperties</span><span class="p">(</span><span class="nx">accountId</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Get a list of all the properties for the account.</span>
  <span class="nx">gapi</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">management</span><span class="p">.</span><span class="nx">webproperties</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span>
      <span class="p">{</span><span class="s1">&#39;accountId&#39;</span><span class="o">:</span> <span class="nx">accountId</span><span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">handleProperties</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Log any errors.</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">handleProperties</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handles the response from the webproperties list method.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Get the first Google Analytics account</span>
    <span class="kd">var</span> <span class="nx">firstAccountId</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">accountId</span><span class="p">;</span>

    <span class="c1">// Get the first property ID</span>
    <span class="kd">var</span> <span class="nx">firstPropertyId</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">id</span><span class="p">;</span>

    <span class="c1">// Query for Views (Profiles).</span>
    <span class="nx">queryProfiles</span><span class="p">(</span><span class="nx">firstAccountId</span><span class="p">,</span> <span class="nx">firstPropertyId</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;No properties found for this user.&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">queryProfiles</span><span class="p">(</span><span class="nx">accountId</span><span class="p">,</span> <span class="nx">propertyId</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Get a list of all Views (Profiles) for the first property</span>
  <span class="c1">// of the first Account.</span>
  <span class="nx">gapi</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">management</span><span class="p">.</span><span class="nx">profiles</span><span class="p">.</span><span class="nx">list</span><span class="p">({</span>
      <span class="s1">&#39;accountId&#39;</span><span class="o">:</span> <span class="nx">accountId</span><span class="p">,</span>
      <span class="s1">&#39;webPropertyId&#39;</span><span class="o">:</span> <span class="nx">propertyId</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">handleProfiles</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Log any errors.</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">handleProfiles</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handles the response from the profiles list method.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Get the first View (Profile) ID.</span>
    <span class="kd">var</span> <span class="nx">firstProfileId</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">id</span><span class="p">;</span>

    <span class="c1">// Query the Core Reporting API.</span>
    <span class="nx">queryCoreReportingApi</span><span class="p">(</span><span class="nx">firstProfileId</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;No views (profiles) found for this user.&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">queryCoreReportingApi</span><span class="p">(</span><span class="nx">profileId</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Query the Core Reporting API for the number sessions for</span>
  <span class="c1">// the past seven days.</span>
  <span class="nx">gapi</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">ga</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
    <span class="s1">&#39;ids&#39;</span><span class="o">:</span> <span class="s1">&#39;ga:&#39;</span> <span class="o">+</span> <span class="nx">profileId</span><span class="p">,</span>
    <span class="s1">&#39;start-date&#39;</span><span class="o">:</span> <span class="s1">&#39;30daysAgo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;end-date&#39;</span><span class="o">:</span> <span class="s1">&#39;yesterday&#39;</span><span class="p">,</span>
    <span class="s1">&#39;metrics&#39;</span><span class="o">:</span> <span class="s1">&#39;ga:sessions&#39;</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">formattedJson</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;query-output&#39;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">formattedJson</span><span class="p">;</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Log any errors.</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

  <span class="c1">// Add an event listener to the &#39;auth-button&#39;.</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;auth-button&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">authorize</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://apis.google.com/js/client.js?onload=authorize&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div><p>Response is</p><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;analytics#gaData&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.googleapis.com/analytics/v3/data/ga?ids=ga:209816969&amp;metrics=ga:sessions&amp;start-date=30daysAgo&amp;end-date=yesterday&quot;</span><span class="p">,</span>
  <span class="nt">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;start-date&quot;</span><span class="p">:</span> <span class="s2">&quot;30daysAgo&quot;</span><span class="p">,</span>
    <span class="nt">&quot;end-date&quot;</span><span class="p">:</span> <span class="s2">&quot;yesterday&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ids&quot;</span><span class="p">:</span> <span class="s2">&quot;ga:209816969&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;ga:sessions&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;start-index&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;max-results&quot;</span><span class="p">:</span> <span class="mi">1000</span>
  <span class="p">},</span>
  <span class="nt">&quot;itemsPerPage&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="nt">&quot;totalResults&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.googleapis.com/analytics/v3/data/ga?ids=ga:209816969&amp;metrics=ga:sessions&amp;start-date=30daysAgo&amp;end-date=yesterday&quot;</span><span class="p">,</span>
  <span class="nt">&quot;profileInfo&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;profileId&quot;</span><span class="p">:</span> <span class="s2">&quot;209816969&quot;</span><span class="p">,</span>
    <span class="nt">&quot;accountId&quot;</span><span class="p">:</span> <span class="s2">&quot;156524189&quot;</span><span class="p">,</span>
    <span class="nt">&quot;webPropertyId&quot;</span><span class="p">:</span> <span class="s2">&quot;UA-156524189-1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;internalWebPropertyId&quot;</span><span class="p">:</span> <span class="s2">&quot;220549817&quot;</span><span class="p">,</span>
    <span class="nt">&quot;profileName&quot;</span><span class="p">:</span> <span class="s2">&quot;All Web Site Data&quot;</span><span class="p">,</span>
    <span class="nt">&quot;tableId&quot;</span><span class="p">:</span> <span class="s2">&quot;ga:209816969&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;containsSampledData&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;columnHeaders&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ga:sessions&quot;</span><span class="p">,</span>
      <span class="nt">&quot;columnType&quot;</span><span class="p">:</span> <span class="s2">&quot;METRIC&quot;</span><span class="p">,</span>
      <span class="nt">&quot;dataType&quot;</span><span class="p">:</span> <span class="s2">&quot;INTEGER&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;totalsForAllResults&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;ga:sessions&quot;</span><span class="p">:</span> <span class="s2">&quot;94&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;rows&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span>
      <span class="s2">&quot;94&quot;</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div></div><hr><section class="comments" id="comments"><h2>Comments</h2><div id="disqus_thread"></div><script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'techjogging'; // required: replace example with your forum shortname

            var disqus_config = function () {
                this.language = "en";

                        this.page.identifier = '2020-04-18-create-oauth-credentials-for-google-analytics-apis';
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></section></article></section></div><div class="col-sm-3" id="sidebar"><aside><section class="well well-sm"><ul class="list-group list-group-flush"><li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4><ul class="list-group" id="recentposts"><li class="list-group-item"><a href="/create-oauth-credentials-for-google-analytics-apis.html">Create OAuth Credentials for Google Analytics APIs</a></li><li class="list-group-item"><a href="/fast-record-count-in-table-or-tables-in-database-in-sql-server.html">Fast Record Count in Table or Tables in Database in SQL Server</a></li><li class="list-group-item"><a href="/redirect-404-error-to-specified-url-in-synology-dsm.html">Redirect 404 Error to Specified URL in Synology DSM</a></li><li class="list-group-item"><a href="/redirect-www-to-https-in-synology-nas-nginx.html">Redirect WWW to HTTPS in Synology DSM Nginx</a></li><li class="list-group-item"><a href="/connect-dbeaver-to-ms-sql-server-with-jaas-using-kerberos-keytab-file-in-windows.html">Connect DBeaver to MS SQL Server with JAAS Using Kerberos Keytab in Windows</a></li></ul></li><li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categories</span></h4><ul class="list-group" id="categories"><li class="list-group-item"><a href="/category/cron.html"><i class="fa fa-folder-open fa-lg"></i>Cron</a></li><li class="list-group-item"><a href="/category/dbeaver.html"><i class="fa fa-folder-open fa-lg"></i>DBeaver</a></li><li class="list-group-item"><a href="/category/docker.html"><i class="fa fa-folder-open fa-lg"></i>Docker</a></li><li class="list-group-item"><a href="/category/google.html"><i class="fa fa-folder-open fa-lg"></i>Google</a></li><li class="list-group-item"><a href="/category/hive.html"><i class="fa fa-folder-open fa-lg"></i>Hive</a></li><li class="list-group-item"><a href="/category/https.html"><i class="fa fa-folder-open fa-lg"></i>HTTPS</a></li><li class="list-group-item"><a href="/category/kerberos.html"><i class="fa fa-folder-open fa-lg"></i>Kerberos</a></li><li class="list-group-item"><a href="/category/linux.html"><i class="fa fa-folder-open fa-lg"></i>Linux</a></li><li class="list-group-item"><a href="/category/microsoft-access.html"><i class="fa fa-folder-open fa-lg"></i>Microsoft Access</a></li><li class="list-group-item"><a href="/category/microsoft-excel.html"><i class="fa fa-folder-open fa-lg"></i>Microsoft Excel</a></li><li class="list-group-item"><a href="/category/ms-sql-server.html"><i class="fa fa-folder-open fa-lg"></i>MS SQL Server</a></li><li class="list-group-item"><a href="/category/nginx.html"><i class="fa fa-folder-open fa-lg"></i>Nginx</a></li><li class="list-group-item"><a href="/category/synology-dsm.html"><i class="fa fa-folder-open fa-lg"></i>Synology DSM</a></li><li class="list-group-item"><a href="/category/virtualization.html"><i class="fa fa-folder-open fa-lg"></i>Virtualization</a></li><li class="list-group-item"><a href="/category/windows-tools.html"><i class="fa fa-folder-open fa-lg"></i>Windows Tools</a></li></ul></li></ul></section></aside></div></div></div><footer><div class="container"><hr><div class="row"><div class="col-xs-10">&copy; 2020 Vitaly Saversky &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>, <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>, <a href="http://getbootstrap.com" target="_blank">Bootstrap</a></div><div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i><a href="#">Back to top</a></p></div></div></div></footer><script src="/theme/js/jquery.min.js"></script><script src="/theme/js/bootstrap.min.js"></script><script src="/theme/js/respond.min.js"></script><script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'techjogging'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script><script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-156524189-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script></body></html>